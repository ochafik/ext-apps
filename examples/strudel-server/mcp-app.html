<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <title>Strudel Music</title>
</head>
<body>
  <canvas id="glCanvas"></canvas>

  <div class="ui-overlay">
    <!-- Toolbar - top right -->
    <div class="toolbar">
      <button id="copyCodeBtn" class="control-btn" title="Copy Strudel code">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="9" width="13" height="13" rx="2"/>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
        </svg>
        <span class="btn-label">Code</span>
      </button>
      <button id="copyShaderBtn" class="control-btn" title="Copy shader">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="9" width="13" height="13" rx="2"/>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
        </svg>
        <span class="btn-label">Shader</span>
      </button>
      <button id="fullscreenBtn" class="control-btn fullscreen-btn" title="Toggle fullscreen">
        <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
        </svg>
        <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/>
        </svg>
      </button>
    </div>

    <!-- Big centered play button -->
    <button id="playBtn" class="play-btn" title="Click to start audio">
      <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M8 5v14l11-7z"/>
      </svg>
      <svg class="pause-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
      </svg>
    </button>

    <!-- Code preview during streaming -->
    <pre id="codePreview" class="code-preview"></pre>

    <!-- Code overlay on hover -->
    <pre id="codeOverlay" class="code-overlay"></pre>

    <!-- Audio meters at bottom -->
    <div class="meters-bar">
      <div class="beat-indicator" id="beatDot"></div>
      <div class="meter">
        <span>BASS</span>
        <div class="meter-track"><div class="meter-fill bass" id="mBass"></div></div>
      </div>
      <div class="meter">
        <span>MID</span>
        <div class="meter-track"><div class="meter-fill mid" id="mMid"></div></div>
      </div>
      <div class="meter">
        <span>HIGH</span>
        <div class="meter-track"><div class="meter-fill high" id="mHigh"></div></div>
      </div>
      <div class="meter">
        <span>AMP</span>
        <div class="meter-track"><div class="meter-fill amp" id="mAmp"></div></div>
      </div>
    </div>

    <!-- Code toggle button -->
    <button id="codeToggleBtn" class="code-toggle-btn" title="Show/hide code">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M16 18l6-6-6-6M8 6l-6 6 6 6"/>
      </svg>
    </button>

    <!-- Strudel link -->
    <a href="https://strudel.cc" target="_blank" rel="noopener" class="strudel-link" title="Powered by Strudel">
      strudel.cc
    </a>
  </div>

  <script type="module" src="/src/mcp-app.ts"></script>
</body>
</html>
